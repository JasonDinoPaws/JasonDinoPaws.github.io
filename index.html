<html class="body">
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link rel="stylesheet" href="Theme.css">
<title>JasonDinoPaws Portfolio</title> 

</head>

<body>
    <ifont class="RootLocation" id="Location">Portfolio</ifont>
    <button class="RootButton" onclick="PathCopy()"></button>

    <div class="ButtonBar" id = "ButtonBar">
        <button class="SectionButton" onclick="">Hello</button>
    </div>

    <iframe scrolling="true" class="MainFrame" id="InfoFrame" src="Subsites/Start.html"></iframe>

    <script src="Code/FunnyButton.js"></script>

    <script>
        var SitePath = "https://jasondinopaws.github.io/Portfolio/";
        function PathCopy(){
            const PathText =  document.getElementById("Location").innerText ;
            try {
                navigator.clipboard.writeText(SitePath);
                document.getElementById("Location").innerText = "Copyed Path";
            } catch (error) {
                document.getElementById("Location").innerText = "Failed to Copy Path";
            }

            setTimeout(() => {
                document.getElementById("Location").innerText = PathText;
            }, 2500);
        }

        function ChangePath(path = "Portfolio",site = "Subsites/Start.html"){
            document.getElementById("Location").innerText = path;
            document.getElementById("InfoFrame").src = site
            SitePath = "https://jasondinopaws.github.io/Portfolio/"+(site != "Subsites/Start.html" && site || "")

            const pathspit = path.split("/");
            const ButtonBar = document.getElementById("ButtonBar");
            while (ButtonBar.hasChildNodes()) {
                ButtonBar.removeChild(ButtonBar.firstChild);
            }

            // Loads all Buttons/Webpages for the current path
            $.getJSON("ButtonBar.json", function(data) {
                var backpath = "";
                var Backsite = "";


                for (a in pathspit){
                    if (pathspit[a].length > 0){

                        if (a > 0 && data.Buttons != null)
                            data = data.Buttons[pathspit[a]]

                        if (a+1 < pathspit.length){
                            backpath += pathspit[a]+(a+1 < pathspit.length-1 && "/" || "")
                            Backsite = data.Site
                        }
                    }
                }

                // Create Back Path Button
                if (pathspit.length > 1){
                    ButtonBar.insertAdjacentHTML('beforeend', "<button class='SectionButton' onclick=\"ChangePath(\'"+(backpath)+"\', \'"+Backsite+"\')\">...</button>");
                    ButtonBar.insertAdjacentHTML('beforeend', " ");
                }

                if (data.Buttons == null){

                }else{
                    $.each(data.Buttons, function(Sec,Data){
                        ButtonBar.insertAdjacentHTML('beforeend', "<button class='SectionButton' onclick=\"ChangePath(\'"+(path+'/'+Sec)+"\', \'"+Data.Site+"\')\">"+Sec+"</button>");
                        ButtonBar.insertAdjacentHTML('beforeend', " ");
                    })
                }
            })

            // Funny Button
            ButtonBar.insertAdjacentHTML('beforeend', "<button class='SectionButton' id='FunnyButton'><img src='https://upload.wikimedia.org/wikipedia/en/thumb/9/9a/Trollface_non-free.png/30px-Trollface_non-free.png'/></button>");
            ButtonBar.insertAdjacentHTML('beforeend', " ");
        }

        if (localStorage.getItem("Redirrection").length > 0){
            ChangePath("Portfolio/"+localStorage.getItem("Redirrection"),localStorage.removeItem("Site"));
            localStorage.removeItem("Redirrection");
            localStorage.removeItem("Site");
        } else
            ChangePath();
    </script>

</body>
</html>